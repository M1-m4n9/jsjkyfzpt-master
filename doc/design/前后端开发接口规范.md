# 接口规范
由前端(Web端)和后端一起协定接口规范的内容, 确定每一个接口的地址(URL), 输入(request)和输出(response),，同时详细注释每一个字段的含义和数据类型.
具体需要定义那些接口可以按照下面的约定：

 - 资源接口：(例如：获取所有院校信息、新建院校信息)按照RESTful风格定义
 - 操作接口：(例如：登录)如果可以使用restful风格就使用RESTful风格
 - 页面接口：(例如：进入首页时候)这个页面存在许多的接口，如果一个个调用影响性能，因此需要将这些接口的数据汇总在一起新建一个聚合接口

# RESTful风格

> 概念：一种软件架构风格、设计风格，而不是标准，只是提供了一组设计原则和约束条件。它主要用于客户端和服务器交互类的软件。基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存等机制。

| 请求方式 | 举例 | 含义|
|--|--|--|
| GET | /users/1001  获取1001这个用户 | 获取资源|
|  POST| /users  新建用户信息| 新增资源|
|  PUT| /users/1001 修改1001这个用户| 修改资源|
| DELETE | /users/1001  删除1001这个用户| 删除资源|
# 接口设计要点
## API设计规范

 

#### 1. 不要使用动词
例如：/getAllUsers、/deleteUsers，因为使用RESTful
风格后/getAllUsers就是get请求，/deleteUsers就是delete请求
#### 2. GET方法和查询参数不涉及状态改变
#### 3. 使用复数名词
为了避免单复数问题，所有资源都使用复数
#### 4. 为集合提供过滤、排序、分页等功能

 - 过滤
使用查询参数就行过滤
GET /users？age>50
 -  排序
GET /users?sort=-age,+date
相当于按照年龄降序，日期升序排列
 -  分页
GET /users？offset=10&limit=5
相当于查询第10页，每页5条数据
 -  搜索
GET /articles?query=后端
相当于搜索文章标题中带有后端这两个字的文章

## 接口返回数据
#### 1. 接口返回统一的数据格式，参考[接口返回数据格式](#1)
#### 2.  当查询不到数据时，不要返回null
如果是对象应返回空({}),数组返回([])，其他类型也应该返回其默认值
#### 3.  对大数字返回给前端时应注意使用String类型
#### 4. 返回的日期格式
如果前端还要再次加工则返回时间戳如果前端不在加工则返回2022-08-31
## 接口文档时刻保存在apifox里面
## <h3 id="1">接口返回数据格式
#### 1. 接口返回对象应该包含三个参数

```java
{
	"status":0,
	"data":"",
	"statusInfo":{
		"message":"给用户的提示信息",
		"detail":"排错时候，错误的原因"
	}
}
```
|参数|含义  |
|--|--|
|  status| 状态码 |
|  data| 返回的数据 |
|  statusInfo|  message字段作为接口处理失败给前端提供的提示，detail提供产生该问题的具体原因(前端不用管，后端日志排查时候需要注意的)|
#### 2.  例子

 - 成功


```java
{
	"status":0,
	"data":"API RESULT"
}
```

 - 失败

```java
{
	"status":1,
	"data":"",
	"statusInfo":{
		"message":"服务器正忙",
		"detail":{
			"exception":"NullPoint"
		}
	}
}
```
#### 3.  对于分页返回的对象

```java
{
	"total":"100",
	"rows":"当前页的结果"
}
```
|参数| 含义 |
|--|--|
| total | Long类型就是这个条件下的总条数 |
| rows | List类型就是这一页下的所有数据 |


## 状态码(status)规定
10000 表示接口调用正常
10001 表示接口调用失败
10404 表示 HTTP 请求 404 错误
20000 表示 API 调用失败
30000 代表业务错误
30100 表示业务A错误
30200 表示业务B错误
